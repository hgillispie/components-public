# .builderrules - Design System Transformation Hub

## CRITICAL: Component Creation Rules

### NEVER create new components from scratch
- When asked to "create our new Button component" or similar, ALWAYS:
  1. Import the existing Material UI component
  2. Create a wrapper/transformation in `src/components/[category]/[ComponentName].jsx`
  3. Apply design system styles while preserving ALL MUI props, variants, and functionality
  4. DO NOT create components in random locations

### Component Transformation Process

When transforming any component:

```javascript
// CORRECT: Transform existing MUI component
// File: src/components/forms/Button.jsx
import { Button as MuiButton } from '@mui/material';
import { forwardRef } from 'react';

export const Button = forwardRef((props, ref) => {
  // Apply our design system classes while keeping MUI functionality
  return <MuiButton {...props} ref={ref} className={applyDesignSystem(props)} />;
});
```

```javascript
// WRONG: Creating from scratch
// DO NOT DO THIS
export const Button = ({ children, onClick }) => {
  return <button onClick={onClick}>{children}</button>;
};
```

## Project Structure Rules

### File Organization (Based on Current Repository)
```
src/
├── components/           # ALL transformed components go here
│   ├── forms/
│   │   ├── Button.jsx
│   │   ├── Button.md
│   │   └── Button.examples.jsx
│   ├── navigation/
│   ├── data-display/
│   ├── feedback/
│   ├── surfaces/
│   └── utils/
├── layout/              # App shell components
│   ├── Sidebar.jsx
│   └── MainContent.jsx
├── styles/
│   ├── globals.css
│   └── tokens.css
├── utils/
│   └── component-registry.js
├── App.jsx
└── main.jsx
```

### Component Categories Mapping
- **forms/**: Button, TextField, Select, Checkbox, Radio, Switch, Slider, ToggleButton
- **navigation/**: Tabs, Stepper, Breadcrumbs, Drawer, Menu, BottomNavigation, Link, Pagination
- **data-display/**: Table, DataGrid, List, Card, Accordion, TreeView, Timeline
- **feedback/**: Alert, Dialog, Snackbar, Progress, Backdrop, Skeleton
- **surfaces/**: AppBar, Paper, Toolbar, Container
- **utils/**: Avatar, Badge, Chip, Divider, Icon, Tooltip, Typography

## Design System Application Rules

### Style Transformation
1. **Preserve MUI API**: Keep all props, methods, and ref forwarding
2. **Apply Design Tokens**: Use CSS variables from `.builder/design-tokens.md`
3. **Use Tailwind Classes**: Apply via className merging, not inline styles
4. **Maintain Variants**: Keep all MUI variants (contained, outlined, text for Button, etc.)

### Reading Design System Files
Always check and parse these files in `.builder/` directory:
- `design-tokens.md` - Color palette, spacing, typography
- `animations.md` - Transitions and motion values  
- `patterns.md` - Component composition patterns
- `components/[name].md` - Component-specific overrides

## Material UI Color Override Strategy

When transforming Material UI components, always ensure proper color override using this approach:

### 1. Use sx prop with specific MUI selectors and !important
- Target specific Material UI variant classes like `&.MuiButton-containedPrimary`, `&.MuiButton-outlinedSecondary`
- Use `!important` declarations to ensure design system colors override MUI defaults
- Never rely solely on Tailwind classes for color overrides - they lack sufficient specificity

### 2. Required sx patterns for common components:
```jsx
sx={{
  // Target specific MUI variant combinations
  '&.MuiButton-containedPrimary': {
    backgroundColor: 'var(--color-action-primary) !important',
    color: 'white !important',
    '&:hover': {
      backgroundColor: 'var(--color-action-primary-hover) !important',
    }
  },
  '&.MuiButton-outlinedPrimary': {
    borderColor: 'var(--color-action-primary) !important',
    color: 'var(--color-action-primary) !important',
  }
}}

### CSS Variable Structure
```css
/* Extract tokens to src/styles/tokens.css */
:root {
  /* Colors from design-tokens.md */
  --color-primary-500: ...;
  --color-secondary-500: ...;
  
  /* Spacing from design-tokens.md */
  --spacing-xs: ...;
  --spacing-sm: ...;
  
  /* Typography from design-tokens.md */
  --font-size-base: ...;
  --font-weight-medium: ...;
}
```

## Documentation Generation Rules

For each transformed component, create:

### 1. Component Documentation (Button.md)
```markdown
# Button Component

## Overview
[Component description based on MUI docs + our modifications]

## Props
[Table of all MUI props + any custom props]

## Variants
[Visual examples of each variant with our styling]

## Usage Examples
[Code snippets for common use cases]

## Design Tokens Used
[List of CSS variables applied]

## Accessibility
[ARIA attributes and keyboard navigation]
```

### 2. Examples File (Button.examples.jsx)
```javascript
export const ButtonExamples = {
  variants: [
    { label: 'Contained', props: { variant: 'contained' } },
    { label: 'Outlined', props: { variant: 'outlined' } },
    { label: 'Text', props: { variant: 'text' } }
  ],
  sizes: ['small', 'medium', 'large'],
  states: ['default', 'hover', 'active', 'disabled', 'loading']
};
```

## Component Registry Updates

When transforming a component, update `src/utils/component-registry.js`:

```javascript
export const componentRegistry = {
  forms: {
    Button: {
      status: 'complete', // 'not-started' | 'in-progress' | 'complete'
      muiComponent: '@mui/material/Button',
      transformedPath: '/components/forms/Button',
      documentationPath: '/components/forms/Button.md',
      lastUpdated: new Date().toISOString()
    }
  }
};
```

## Sidebar Behavior Rules

### Initial State
- Show ALL MUI components in categories
- Mark all as "not-started" status
- Display search bar at top
- Categories are expanded by default
- Sidebar component lives in `src/layout/Sidebar.jsx`

### After Transformation
- Update status indicator to "complete"
- Enable navigation to component view
- Show preview in main content area (MainContent.jsx)
- Display documentation below preview

## Command Interpretation Rules

### When user says "create our new [Component] component":
1. Identify the MUI component to transform
2. Determine correct category folder in `src/components/`
3. Create transformation wrapper (NOT new component)
4. Apply design system from `.builder/` files
5. Generate documentation
6. Update registry
7. Add to sidebar navigation

### When user says "show me the [Component]":
1. Navigate to the transformed component view
2. Display live preview
3. Show documentation
4. Provide code examples

## Import Path Rules

### Use Absolute Imports
```javascript
// Use @ alias for src directory
import { Button } from '@/components/forms/Button';
import { Sidebar } from '@/layout/Sidebar';
import { componentRegistry } from '@/utils/component-registry';

// NOT relative imports
import { Button } from '../../../components/forms/Button'; // AVOID
```

### Vite Config for Absolute Imports
Ensure `vite.config.js` includes:
```javascript
export default {
  resolve: {
    alias: {
      '@': '/src',
    },
  },
};
```

## Storybook Preparation Rules

### File Naming
- Component: `Button.jsx`
- Stories stub: `Button.stories.js` (create empty stub)
- Documentation: `Button.md`
- Examples: `Button.examples.jsx`

### Export Pattern
```javascript
// Button.jsx
export const Button = forwardRef(...);
export default Button;

// Also export prop types for Storybook
export const buttonPropTypes = {
  variant: ['contained', 'outlined', 'text'],
  size: ['small', 'medium', 'large'],
  color: ['primary', 'secondary', 'error', 'warning', 'info', 'success']
};
```

## Extension Rules for Other Libraries

### When adding chart/graph libraries:
1. Create new category in `src/components/` (e.g., `data-viz/`)
2. Follow same transformation pattern
3. Wrap third-party components, don't recreate
4. Apply consistent design tokens

## Error Prevention

### DO NOT:
- Create components from scratch
- Ignore existing MUI functionality
- Use inline styles instead of Tailwind classes
- Create new component APIs that break MUI compatibility
- Place transformed components outside `src/components/[category]/`

### ALWAYS:
- Import and wrap existing library components
- Preserve all original props and methods
- Use the `src/components/[category]/` structure
- Apply styles via className and CSS variables
- Generate documentation for every transformation
- Use absolute imports with @ alias

## Initial Setup Checklist

1. ✅ Install MUI but don't display components
2. ✅ Create black sidebar in `src/layout/Sidebar.jsx`
3. ✅ Set up `src/components/` folder structure with categories
4. ✅ Prepare component registry in `src/utils/`
5. ✅ Configure Tailwind with CSS variables
6. ✅ Wait for transformation commands

## Success Metrics

A component is successfully transformed when:
- Original MUI component is imported and wrapped
- All props and variants work identically to MUI
- Design system tokens are applied via CSS variables
- Documentation is auto-generated
- Registry is updated in `src/utils/component-registry.js`
- Component appears in sidebar as "complete"
- Located in correct category under `src/components/`